"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[916],{421:(e,s,a)=>{a.r(s),a.d(s,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>o});var n=a(4848),i=a(8453);const t={sidebar_label:"ZoomLDM - CVPR Workshop 2024"},l="ZoomLDM: Latent Diffusion Model for multi-scale conditional histopathology image generation",r={id:"publications/cvprw_24",title:"ZoomLDM: Latent Diffusion Model for multi-scale conditional histopathology image generation",description:"CVPR Workshop 2024",source:"@site/docs/publications/cvprw_24.md",sourceDirName:"publications",slug:"/publications/cvprw_24",permalink:"/docs/publications/cvprw_24",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{sidebar_label:"ZoomLDM - CVPR Workshop 2024"},sidebar:"publicationsSidebar",previous:{title:"\u221e-Brush - ECCV 2024",permalink:"/docs/publications/eccv_24"},next:{title:"Large Image Generation - CVPR 2024",permalink:"/docs/publications/cvpr_24"}},c={},o=[{value:"Abstract",id:"abstract",level:2},{value:"Model",id:"model",level:2},{value:"Results",id:"results",level:2},{value:"Qualitative results",id:"qualitative-results",level:3},{value:"FID scores",id:"fid-scores",level:3},{value:"Novel image synthesis",id:"novel-image-synthesis",level:3},{value:"Zooming in",id:"zooming-in",level:3}];function m(e){const s={annotation:"annotation",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",math:"math",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",p:"p",semantics:"semantics",span:"span",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h1,{id:"zoomldm-latent-diffusion-model-for-multi-scale-conditional-histopathology-image-generation",children:"ZoomLDM: Latent Diffusion Model for multi-scale conditional histopathology image generation"}),"\n",(0,n.jsxs)("div",{className:"infobox",children:[(0,n.jsx)("span",{class:"conference-title",children:"CVPR Workshop 2024"}),(0,n.jsx)("span",{class:"authors",children:(0,n.jsx)(s.p,{children:"Srikar Yellapragada*, Alexandros Graikos*, Prateek Prasanna, Rajarsi Gupta, Joel Saltz, Dimitris Samaras"})}),(0,n.jsx)("div",{class:"button-group",children:(0,n.jsx)("button",{class:"button_class",onClick:()=>window.open("https://generative-vision.github.io/workshop-CVPR-24/papers/55.pdf","_blank"),children:"Paper"})})]}),"\n",(0,n.jsx)(s.h2,{id:"abstract",children:"Abstract"}),"\n",(0,n.jsx)(s.p,{children:"Diffusion models have revolutionized image generation, yet several challenges restrict their application in digital pathology. Existing approaches struggle with precise control over the appearance of image patches, are typically confined to generating images at a single magnification level, and face limitations due to the lack of large annotated datasets which have been essential to the success of diffusion models in the natural image domain. Self-supervised encoders have emerged as a viable workaround for the annotation deficit, yet their effective application across varying magnifications presents its own set of challenges. We present ZoomLDM, a latent diffusion model tailored for generating histopathology images across a spectrum of magnifications. Central to our approach is a novel magnification-aware conditioning mechanism, that leverages a patch summarization CNN, jointly trained with the diffusion model. This CNN processes self-supervised embeddings, retaining vital information and enabling controllable image generation. ZoomLDM achieves state-of-the-art image generation quality, especially in lower magnifications where there is limited data availability. Furthermore, we introduce a second model to generate the embeddings consumed by the conditioning mechanism, eliminating the dependency on recycling existing embeddings and facilitating the generation of novel images."}),"\n",(0,n.jsx)(s.h2,{id:"model",children:"Model"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{alt:"CVPRW_figure",src:a(3002).A+"",width:"3229",height:"1799"})}),"\n",(0,n.jsx)(s.p,{children:"Overview of our method."}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["We extract ",(0,n.jsxs)(s.span,{className:"katex",children:[(0,n.jsx)(s.span,{className:"katex-mathml",children:(0,n.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(s.semantics,{children:[(0,n.jsxs)(s.mrow,{children:[(0,n.jsx)(s.mn,{children:"256"}),(0,n.jsx)(s.mo,{children:"\xd7"}),(0,n.jsx)(s.mn,{children:"256"})]}),(0,n.jsx)(s.annotation,{encoding:"application/x-tex",children:"256 \\times 256"})]})})}),(0,n.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,n.jsx)(s.span,{className:"mord",children:"256"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(s.span,{className:"mbin",children:"\xd7"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.6444em"}}),(0,n.jsx)(s.span,{className:"mord",children:"256"})]})]})]})," patches and the corresponding ",(0,n.jsxs)(s.span,{className:"katex",children:[(0,n.jsx)(s.span,{className:"katex-mathml",children:(0,n.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(s.semantics,{children:[(0,n.jsxs)(s.mrow,{children:[(0,n.jsx)(s.mn,{children:"20"}),(0,n.jsx)(s.mo,{children:"\xd7"})]}),(0,n.jsx)(s.annotation,{encoding:"application/x-tex",children:"20 \\times"})]})})}),(0,n.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,n.jsx)(s.span,{className:"mord",children:"20"}),(0,n.jsx)(s.span,{className:"mord",children:"\xd7"})]})})]})," regions across all magnifications."]}),"\n",(0,n.jsxs)(s.li,{children:["Following this, we apply HIPT on the ",(0,n.jsxs)(s.span,{className:"katex",children:[(0,n.jsx)(s.span,{className:"katex-mathml",children:(0,n.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(s.semantics,{children:[(0,n.jsxs)(s.mrow,{children:[(0,n.jsx)(s.mn,{children:"20"}),(0,n.jsx)(s.mo,{children:"\xd7"})]}),(0,n.jsx)(s.annotation,{encoding:"application/x-tex",children:"20\\times"})]})})}),(0,n.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,n.jsx)(s.span,{className:"mord",children:"20"}),(0,n.jsx)(s.span,{className:"mord",children:"\xd7"})]})})]})," region in a patch-wise manner to obtain an embedding matrix."]}),"\n",(0,n.jsxs)(s.li,{children:["Our CNN processes this matrix, producing an output vector of size ",(0,n.jsxs)(s.span,{className:"katex",children:[(0,n.jsx)(s.span,{className:"katex-mathml",children:(0,n.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(s.semantics,{children:[(0,n.jsxs)(s.mrow,{children:[(0,n.jsx)(s.mn,{children:"8"}),(0,n.jsx)(s.mo,{children:"\xd7"}),(0,n.jsx)(s.mn,{children:"8"}),(0,n.jsx)(s.mo,{children:"\xd7"}),(0,n.jsx)(s.mn,{children:"512"})]}),(0,n.jsx)(s.annotation,{encoding:"application/x-tex",children:"8 \\times 8 \\times 512"})]})})}),(0,n.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,n.jsx)(s.span,{className:"mord",children:"8"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(s.span,{className:"mbin",children:"\xd7"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,n.jsx)(s.span,{className:"mord",children:"8"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(s.span,{className:"mbin",children:"\xd7"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.6444em"}}),(0,n.jsx)(s.span,{className:"mord",children:"512"})]})]})]}),", which then conditions the diffusion model."]}),"\n",(0,n.jsx)(s.li,{children:"The CNN is designed to be magnification-aware, enabling it to identify the appropriate level of detail required at different scales."}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"results",children:"Results"}),"\n",(0,n.jsx)(s.h3,{id:"qualitative-results",children:"Qualitative results"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{alt:"CVPRW_res",src:a(4180).A+"",width:"2302",height:"1210"})}),"\n",(0,n.jsxs)(s.p,{children:["Synthetic patches (",(0,n.jsxs)(s.span,{className:"katex",children:[(0,n.jsx)(s.span,{className:"katex-mathml",children:(0,n.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(s.semantics,{children:[(0,n.jsxs)(s.mrow,{children:[(0,n.jsx)(s.mn,{children:"256"}),(0,n.jsx)(s.mo,{children:"\xd7"}),(0,n.jsx)(s.mn,{children:"256"})]}),(0,n.jsx)(s.annotation,{encoding:"application/x-tex",children:"256 \\times 256"})]})})}),(0,n.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,n.jsx)(s.span,{className:"mord",children:"256"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(s.span,{className:"mbin",children:"\xd7"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.6444em"}}),(0,n.jsx)(s.span,{className:"mord",children:"256"})]})]})]})," pixel) from ZoomLDM, juxtaposed with the reference (real) images used to generate them."]}),"\n",(0,n.jsx)(s.p,{children:"Across all magnifications, ZoomLDM demonstrates consistent preservation semantic features of the reference patches."}),"\n",(0,n.jsx)(s.h3,{id:"fid-scores",children:"FID scores"}),"\n",(0,n.jsxs)(s.p,{children:["FID of patches generated from ZoomLDM across different magnifications, compared with single magnification models. Our model achieves comparable performance to SoTA at higher magnifications and starts to outperform at magnifications lower than ",(0,n.jsxs)(s.span,{className:"katex",children:[(0,n.jsx)(s.span,{className:"katex-mathml",children:(0,n.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(s.semantics,{children:[(0,n.jsxs)(s.mrow,{children:[(0,n.jsx)(s.mn,{children:"5"}),(0,n.jsx)(s.mo,{children:"\xd7"})]}),(0,n.jsx)(s.annotation,{encoding:"application/x-tex",children:"5 \\times"})]})})}),(0,n.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,n.jsx)(s.span,{className:"mord",children:"5"}),(0,n.jsx)(s.span,{className:"mord",children:"\xd7"})]})})]}),". By Oracle Cond. we denote generating images using ground truth conditions extracted from the training set. Generated Cond. refers to synthesizing images from conditions sampled from our EDM."]}),"\n",(0,n.jsx)("center",{children:(0,n.jsx)("img",{src:"/img/cvpr24w/fid_scores.png",alt:"drawing",style:{width:"500px"}})}),"\n",(0,n.jsx)(s.h3,{id:"novel-image-synthesis",children:"Novel image synthesis"}),"\n",(0,n.jsx)(s.p,{children:"We evaluate the EDM by hierarchically synthesizing 10,000 patches at all magnifications; we first sample an embedding from the trained model and then we synthesize the corresponding image. As shown in the above table, the generated embedding-conditioned model FID (Generated Cond.) drops when compared to the ZoomLDM that has access to the training set (Oracle Cond.). We showcase novel images in the supplementary material."}),"\n",(0,n.jsx)(s.h3,{id:"zooming-in",children:"Zooming in"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{alt:"CVPRW_res",src:a(786).A+"",width:"2732",height:"997"})}),"\n",(0,n.jsxs)(s.p,{children:["We demonstrate a decompression pipeline, where we re-synthesize patches at all magnifications of the image, stored as SSL embeddings. The decompression is performed by initializing the diffusion process at a single magnification from an intermediate timestep (",(0,n.jsxs)(s.span,{className:"katex",children:[(0,n.jsx)(s.span,{className:"katex-mathml",children:(0,n.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(s.semantics,{children:[(0,n.jsxs)(s.mrow,{children:[(0,n.jsx)(s.mi,{children:"t"}),(0,n.jsx)(s.mo,{children:"="}),(0,n.jsx)(s.mn,{children:"500"})]}),(0,n.jsx)(s.annotation,{encoding:"application/x-tex",children:"t=500"})]})})}),(0,n.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.6151em"}}),(0,n.jsx)(s.span,{className:"mord mathnormal",children:"t"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(s.span,{className:"mrel",children:"="}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.6444em"}}),(0,n.jsx)(s.span,{className:"mord",children:"500"})]})]})]}),"), using an upsampled version of the previous magnification patch."]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(m,{...e})}):m(e)}},3002:(e,s,a)=>{a.d(s,{A:()=>n});const n=a.p+"assets/images/method-25691ca182fd7e074181c9a9f402f0d4.png"},4180:(e,s,a)=>{a.d(s,{A:()=>n});const n=a.p+"assets/images/samples-5c13d6b7147991af559096344e0acb73.png"},786:(e,s,a)=>{a.d(s,{A:()=>n});const n=a.p+"assets/images/zooming-e430f727951bae3d4e3eeab41047cc58.png"},8453:(e,s,a)=>{a.d(s,{R:()=>l,x:()=>r});var n=a(6540);const i={},t=n.createContext(i);function l(e){const s=n.useContext(t);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),n.createElement(t.Provider,{value:s},e.children)}}}]);